<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="EventManageMap"   xmlns="http://ibatis.apache.org/mapping"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="SqlMap.xsd">
  <alias>
    <typeAlias alias="EventManage" assembly="DataAccess.dll" type="DataAccess.Domain.EventManage" />
  </alias>
  <resultMaps>
    <resultMap id="EventManageResult" class="EventManage">
      <result property="Id" column="ID" type="long" dbType="long"/>
      <result property="ModuleNoOne" column="ModuleNo_One" type="string" dbType="varchar"/>
      <result property="ModuleNoTwo" column="ModuleNo_Two" type="string" dbType="varchar"/>
      <result property="OperModuleNo" column="OperModuleNo" type="string" dbType="varchar"/>
      <result property="OrderNo" column="OrderNo" type="string" dbType="varchar"/>
      <result property="LoginName" column="LoginName" type="string" dbType="varchar"/>
      <result property="UserNo" column="UserNo" type="string" dbType="varchar"/>
      <result property="DateTime" column="DateTime" type="DateTime" dbType="DateTime"/>
      <result property="Type" column="Type" type="long" dbType="long"/>
      <result property="Ip" column="IP" type="string" dbType="varchar"/>
      <result property="Record" column="Record" type="string" dbType="varchar"/>
    </resultMap>
  </resultMaps>
  <parameterMaps>
    <parameterMap id="MyEventManage" class="Hashtable">

      <parameter property="startDate" />
      <parameter property="endDate" />

    </parameterMap>
  </parameterMaps>
  <statements>

    <select id="SelectEventManage" parameterClass="string" resultClass="EventManage">
      SELECT ID AS Id,ModuleNo_One AS ModuleNoOne,ModuleNo_Two AS ModuleNoTwo,OperModuleNo AS OperModuleNo,OrderNo AS OrderNo,LoginName AS LoginName,UserNo AS UserNo,DateTime AS DateTime,Type AS Type,IP AS Ip,Record AS Record
      FROM EventManage
      <dynamic prepend="WHERE">
        <isParameterPresent>
          ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <insert id="InsertEventManage" parameterClass="EventManage">
      INSERT INTO EventManage
      (ModuleNo_One,ModuleNo_Two,OperModuleNo,OrderNo,LoginName,UserNo,DateTime,Type,IP,Record)
      VALUES(#ModuleNoOne#,#ModuleNoTwo#,#OperModuleNo#,#OrderNo#,#LoginName#,#UserNo#,#DateTime#,#Type#,#Ip#,#Record#)
      <selectKey resultClass="long" type="post" property="Id">
        SELECT LAST_INSERT_ROWID() as value
      </selectKey>
    </insert>
    <update id="UpdateEventManage" parameterClass="EventManage">
      UPDATE EventManage
      SET ModuleNo_One=#ModuleNoOne#,ModuleNo_Two=#ModuleNoTwo#,OperModuleNo=#OperModuleNo#,OrderNo=#OrderNo#,LoginName=#LoginName#,UserNo=#UserNo#,DateTime=#DateTime#,Type=#Type#,IP=#Ip#,Record=#Record#
      WHERE ID = #Id#
    </update>
    <delete id="DeleteEventManage" parameterClass="string">
      DELETE FROM EventManage
      WHERE ID = #value#
    </delete>
    <delete id="DeleteEventManage1" parameterMap="MyEventManage">
      DELETE FROM EventManage
      <dynamic prepend=" where ">
        <isNotEmpty prepend="and" property="startDate">
          [DateTime]>= #startDate#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="endDate">
          <![CDATA[ [DateTime] <= #endDate# ]]>
        </isNotEmpty>
      </dynamic>
    </delete>
  </statements>
</sqlMap>
