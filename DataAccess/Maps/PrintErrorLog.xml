<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="PrintErrorLogMap"   xmlns="http://ibatis.apache.org/mapping"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="SqlMap.xsd">
  <alias>
    <typeAlias alias="PrintErrorLog" assembly="DataAccess.dll" type="DataAccess.Domain.PrintErrorLog" />
  </alias>
  <resultMaps>
    <resultMap id="PrintErrorLogResult" class="PrintErrorLog">
      <result property="Id" column="ID" type="long" dbType="long"/>
      <result property="OperTime" column="OperTime" type="DateTime" dbType="DateTime"/>
      <result property="OrderNo" column="OrderNo" type="string" dbType="varchar"/>
      <result property="OperUserNo" column="OperUserNo" type="string" dbType="varchar"/>
      <result property="ErrorMessage" column="ErrorMessage" type="string" dbType="varchar"/>
      <result property="PrinterNo" column="PrinterNo" type="string" dbType="varchar"/>
    </resultMap>
  </resultMaps>
  <statements>

    <select id="SelectPrintErrorLog" parameterClass="string" resultClass="PrintErrorLog">
      SELECT ID AS Id,OperTime AS OperTime,OrderNo AS OrderNo,OperUserNo AS OperUserNo,ErrorMessage AS ErrorMessage,PrinterNo AS PrinterNo
      FROM PrintErrorLog
      <dynamic prepend="WHERE">
        <isParameterPresent>
          ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <insert id="InsertPrintErrorLog" parameterClass="PrintErrorLog">
      INSERT INTO PrintErrorLog
      (OperTime,OrderNo,OperUserNo,ErrorMessage,PrinterNo)
      VALUES(#OperTime#,#OrderNo#,#OperUserNo#,#ErrorMessage#,#PrinterNo#)
      <selectKey resultClass="long" type="post" property="Id">
        SELECT LAST_INSERT_ROWID() as value
      </selectKey>
    </insert>
    <update id="UpdatePrintErrorLog" parameterClass="PrintErrorLog">
      UPDATE PrintErrorLog
      SET OperTime=#OperTime#,OrderNo=#OrderNo#,OperUserNo=#OperUserNo#,ErrorMessage=#ErrorMessage#,PrinterNo=#PrinterNo#
      WHERE ID = #Id#
    </update>
    <delete id="DeletePrintErrorLog" parameterClass="string">
      DELETE FROM PrintErrorLog
      WHERE ID = #value#
    </delete>
  </statements>
</sqlMap>
