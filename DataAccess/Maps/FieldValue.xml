<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="FieldValueMap" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="SqlMap.xsd">
  <alias>
    <typeAlias alias="FieldValue" assembly="DataAccess.dll" type="DataAccess.Domain.FieldValue" />
  </alias>
  <resultMaps>
    <resultMap id="FieldValueResult" class="FieldValue">
      <result property="Id" column="ID" type="long" dbType="long"/>
      <result property="Key" column="Key" type="string" dbType="varchar"/>
      <result property="Value" column="Value" type="string" dbType="varchar"/>
      <result property="Text" column="Text" type="string" dbType="varchar"/>
      <result property="Remark" column="Remark" type="string" dbType="varchar"/>
      <result property="IsValidate" column="IsValidate" type="long" dbType="long"/>
      <result property="CreateUser" column="CreateUser" type="string" dbType="varchar"/>
      <result property="CreateTime" column="CreateTime" type="DateTime" dbType="DateTime"/>
      <result property="UpdUser" column="UpdUser" type="string" dbType="varchar"/>
      <result property="UpdTime" column="UpdTime" type="DateTime" dbType="DateTime"/>
    </resultMap>
  </resultMaps>
  <statements>

    <select id="SelectFieldValue" parameterClass="string" resultClass="FieldValue">
      SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
      FROM FieldValue
      <dynamic prepend="WHERE">
        <isParameterPresent>
          ID = #value#
        </isParameterPresent>
      </dynamic>
    </select>
    <select id="DataCountForFiedValue" parameterClass="string">
      select count(0) from FieldValue where Key=#value# and IsValidate=1
    </select>
	<select id="SelectFieldValue2"  parameterClass="Hashtable"  resultClass="FieldValue">
    SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
    FROM FieldValue 
    <dynamic prepend=" WHERE ">
			<isNotEmpty prepend="and" property="sid">
				Key= #sid#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="name1">
				Value= #name1#
			</isNotEmpty>
		</dynamic>
	</select >
    <select id="SelectFieldText"  parameterClass="Hashtable"  resultClass="FieldValue">
      SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
      FROM FieldValue
      <dynamic prepend=" WHERE ">
        <isNotEmpty prepend="and" property="sid">
          Key= #sid#
        </isNotEmpty>
        <isNotEmpty prepend="and" property="name1">
          Text= #name1#
        </isNotEmpty>
      </dynamic>
    </select >
    <select id="SelectFieldValue3"  parameterClass="Hashtable"  resultClass="FieldValue">
      SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
      FROM FieldValue where Key= #sid# and Value= #name1#
    </select >
    <insert id="InsertFieldValue" parameterClass="FieldValue">
      INSERT INTO FieldValue
      (Key,Value,Text,Remark,IsValidate,CreateUser,CreateTime,UpdUser,UpdTime)
      VALUES(#Key#,#Value#,#Text#,#Remark#,#IsValidate#,#CreateUser#,#CreateTime#,#UpdUser#,#UpdTime#)
      <selectKey resultClass="long" type="post" property="Id">
        SELECT LAST_INSERT_ROWID() as value
      </selectKey>
    </insert>
    <update id="UpdateFieldValue" parameterClass="FieldValue">
      UPDATE FieldValue
      SET Key=#Key#,Value=#Value#,Text=#Text#,Remark=#Remark#,IsValidate=#IsValidate#,CreateUser=#CreateUser#,CreateTime=#CreateTime#,UpdUser=#UpdUser#,UpdTime=#UpdTime#
      WHERE ID = #Id#
    </update>
	<update id="UpdateFieldValue1" parameterClass="FieldValue">
		UPDATE FieldValue
		SET Key=#Key#,Value=#Value#,Text=#Text#,Remark=#Remark#,IsValidate=#IsValidate#,CreateUser=#CreateUser#,CreateTime=#CreateTime#,UpdUser=#UpdUser#,UpdTime=#UpdTime#
		WHERE Value = #Value#
	</update>
	  <update id="UpdateFieldValueSige" parameterClass="FieldValue">
		  UPDATE FieldValue
		  SET Key=#Key#,UpdUser=#UpdUser#,UpdTime=#UpdTime#
		  WHERE Key = #Value#
	  </update>
    <delete id="DeleteFieldValue" parameterClass="string">
      DELETE FROM FieldValue
      WHERE ID = #value#
    </delete>
	<delete id="DeleteFieldValue1" parameterClass="string">
		DELETE FROM FieldValue
		WHERE Value = #value#
	</delete>
    <select id="SelectFieldValue1" parameterClass="string" resultClass="FieldValue">
      SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
      FROM FieldValue
      <dynamic prepend="WHERE">
        <isParameterPresent>
          Key = #value#
        </isParameterPresent>
      </dynamic>
    </select>
	  <select id="SelectFieldValueText" parameterClass="string" resultClass="FieldValue">
		  SELECT ID AS Id,Key AS Key,Value AS Value,Text AS Text,Remark AS Remark,IsValidate AS IsValidate,CreateUser AS CreateUser,CreateTime AS CreateTime,UpdUser AS UpdUser,UpdTime AS UpdTime
		  FROM FieldValue
		  <dynamic prepend="WHERE">
			  <isParameterPresent>
				  Value = #value#
			  </isParameterPresent>
		  </dynamic>
	  </select>
	  <select id="SelectFieldValueUnion" parameterClass="string" resultClass="FieldValue">
      select '一�? Remark,Key,Name as Text FROM Field
      UNION select '二级' Remark,value,Text from FieldValue
      <dynamic prepend="WHERE">
			  <isParameterPresent>
				  Value = #value#
			  </isParameterPresent>
		  </dynamic>
	  </select>
 
  </statements>
</sqlMap>
